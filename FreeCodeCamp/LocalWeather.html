<!DOCTYPE html>
<html>
  <head>
    <title>Local Weather</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script type="text/javascript">
      //var url = "http://api.openweathermap.org/data/2.5/weather?lat=23.1828282&lon=77.4139166&APPID=66858e7a4a2f937d6774bc9860a9fe3c&callback=test";
      function getLocation() {
        if (navigator.geolocation) {
          alert("geolocation");
          navigator.geolocation.getCurrentPosition(
            function(success) { 
              alert("Success");
            },
            function(failure) {
              if(failure.message.indexOf("Only secure origins are allowed") == 0) {
                alert("Secure Origin issue");
              } else {
                alert("Other issue");
              }
            });
        } else {
          alert("Geolocation is not supported by this browser.");
        }
      }
      
      function showPosition(position) {
        //$.getJSON('http://api.openweathermap.org/data/2.5/weather?callback=?', {lat:23.1828282, lon:77.4139166, units:'metric', APPID:'66858e7a4a2f937d6774bc9860a9fe3c'}, function(){}).done(success).fail(fail);
        alert("lat=" + position.coords.latitude + "&lon=" + position.coords.longitude);
      }
      /*$.getJSON("http://api.wunderground.com/api/a0b51a3c87e2d6a2/geolookup/conditions/q/autoip.json", function(data) {
        alert("data");
      });*/
      
      
      $(document).ready(function() {
        alert("Page Loaded");
        getLocation();
      });
    </script>
  </head>
  <body>
    http://ip-api.com/json
  </body>
</html>
